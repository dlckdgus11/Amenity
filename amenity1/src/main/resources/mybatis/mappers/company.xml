<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.amenity.company.dao.CompanyDAO">
<resultMap id="companyResult" type="companyVO">      
      <result property="b_no" column="b_no" />
      <result property="company" column="company" />
      <result property="detail" column="detail" />
      <result property="location" column="location" />
      <result property="category" column="category" />
      <result property="main_img" column="main_img" />
      <result property="sub_img" column="sub_img" />
      <result property="grade" column="grade" />
      
   </resultMap> 
   
   <insert id="insertCompany"  parameterType="java.util.Map">
		<![CDATA[
		 insert into company(b_no, company, category, location, detail)
		 values(#{b_no}, #{company}, #{category}, #{loaction}, #{detail})
		]]>      
	</insert>
	
	<select id="selectCompanyName" resultType="String" parameterType="java.util.Map">
		select company from company where company = #{company}
	</select>
	
	<insert id="insertCompanyMainImage" parameterType="java.util.Map">
		insert into companyimage(company, main_img) values(#{company}, #{main_img})
	</insert>
	
	<insert id="insertCompanySubImage" parameterType="java.util.Map">
		insert into companyimage(company, sub_img) values(#{company}, #{sub_img})
	</insert>
	
	<select id="viewCompanyMainImage" resultType="String">
		select main_img from companyimage where company = #{company} and main_img is not null
	</select>
	
	<select id="viewCompanySubImage" resultType="String">
		select sub_img from companyimage where company = #{company} and sub_img is not null
	</select>
	
	
	
	<select id="listProducts" resultType="CompanyVO">
        SELECT * FROM company
    </select>

    <select id="searchCompaniesByName" resultType="CompanyVO">
        SELECT * FROM company WHERE company LIKE CONCAT('%', #{name}, '%')
    </select>
    
    <select id="searchCompaniesByCategory" resultType="CompanyVO">
    	SELECT * FROM company WHERE category = #{category}
	</select>
	
	<select id="selectedCompany" resultType="CompanyVO">
        SELECT * FROM company WHERE company = #{company}
    </select>

	
</mapper>