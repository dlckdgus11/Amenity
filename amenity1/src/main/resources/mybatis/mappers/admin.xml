<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.amenity.admin.dao.AdminDAO">

<resultMap id="articlesResult" type="noticeVO">
	<result property="level" column="level"/>
	<result property="articleNO" column="articleNO"/>
	<result property="title" column="title"/>
	<result property="content" column="content"/>
	<result property="writedate" column="writedate"/>
</resultMap>

	<select id="selectAllArticlesList" resultMap="articlesResult">
	<![CDATA[
		select * from notice
	]]>
	</select>


	<select id="a_signIn"  resultType="adminVO"   parameterType="adminVO" >
		<![CDATA[
		select * from adm
		where a_id=#{a_id} and a_pw=#{a_pw}		
		]]>
  	</select>
  	
  	<select id="selectNewArticleNO" resultType="int">
		<![CDATA[
			select ifnull(max(articleNO), 0) from notice
		]]>
	</select>
	
	<insert id="insertNewArticle" parameterType="java.util.Map">
		<![CDATA[
			insert into notice(articleNO, title, content, writedate, u_id) 
			values(#{articleNO}, #{title}, #{content}, now(), #{u_id})
		]]>
	</insert>
	
	<select id="viewNotice" resultType="NoticeVO" parameterType="int">
		<![CDATA[
		select * from notice where articleNO = #{articleNO}
		]]>
	</select>
	
	<insert id="addNoticeImage" parameterType="java.util.Map">
    <![CDATA[
        insert into noticeimage(articleNO, imageFileName) 
        values(#{articleNO}, #{imageFileName})
    ]]>
	</insert>

	<select id="selectNoticeByArticleNO" resultMap="articlesResult">
    	SELECT * FROM notice WHERE articleNO = #{articleNO}
	</select>

	<select id="selectImageFileNamesByArticleNO" resultType="String">
    	SELECT imageFileName FROM noticeimage WHERE articleNO = #{articleNO}
	</select>

	
	
</mapper>