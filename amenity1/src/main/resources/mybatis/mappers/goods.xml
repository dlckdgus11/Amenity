<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.amenity.goods.dao.GoodsDAO">	

   <resultMap id="goodsResult" type="goodsVO">      
      <result property="g_no" column="g_no" />
      <result property="company" column="company" />
      <result property="room" column="room" />
      <result property="price" column="price" />
      <result property="location" column="location" />
      <result property="grade" column="grade" />
      <result property="main_img" column="main_img" />
      <result property="sub_img" column="sub_img" />
      <result property="detail" column="detail" />
      <result property="stdper" column="stdper" />

   </resultMap> 
 
	<select id="selectGoodsByNo" resultType="GoodsVO">
        SELECT * FROM goods WHERE g_no = #{g_no}
    </select>
	
	<select id="selectAllGoodsList" resultMap="goodsResult">
		<![CDATA[
			select * from goods order by grade
		]]>
	</select>
	
	<insert id="insertGoods" parameterType="java.util.Map">
		<![CDATA[
			insert into goods(company, room, price, timeprice, stdper, detail)
			values(#{company}, #{room}, #{price}, #{timeprice}, #{stdper}, #{detail})
			]]>
	</insert>
	
	<!-- 2023.08.23 추가  -->
	<select id="selectMyCompanyList" resultType="String">
		<![CDATA[
		SELECT company
		FROM company
		WHERE b_no = #{b_no}
		]]>
	</select>
	
	<insert id="addGoodsImg" parameterType="java.util.Map">
		<![CDATA[
			insert into goodsimage(goodsImg_ID, goodsImg_Name)
			value(#{goodsImg_ID}, #{goodsImg_Name})
		]]>
	</insert>
	
	<select id="selectGoodsName" resultType="String" parameterType="java.util.Map">
		<![CDATA[
		select room from goods where room = #{room}
		]]>
	</select>
	
	<insert id="insertGoodsMainImage" parameterType="java.util.Map">
		<![CDATA[
		insert into goodsimage(room, main_img) values(#{room}, #{main_img})
		]]>
	</insert>
	
	<insert id="insertGoodsSubImage" parameterType="java.util.Map">
		<![CDATA[
		insert into goodsimage(room, sub_img) values(#{room}, #{sub_img})
		]]>
	</insert>
	
	<select id="companyGoodsList" resultType="GoodsVO">
        SELECT * FROM goods WHERE company = #{company}
    </select>
	
  
   <select id="selectGoodsByCompany" resultType="GoodsVO" >
    <![CDATA[
        SELECT * FROM goods WHERE  room = #{room};
    ]]>
	</select>
	
	<select id="selectRoomName" resultType="String" parameterType="String">
		select room from goods where company = #{company}
	</select>

	<select id="viewGoodsMainImage" resultType="String">
		select main_img from goodsimage where room = #{room} and main_img is not null
	</select>
	
	<select id="viewGoodsSubImage" resultType="String">
		select sub_img from goodsimage where room = #{room} and sub_img is not null
	</select>
   
   <select id="minGoods" resultType="int">
   		select min(price) from goods where room=#{room}
   </select>
   
</mapper>